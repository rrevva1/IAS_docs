# Статус пунктов из Доработки.md

По файлу **[Доработки.md](../Доработки.md)** (корень репозитория) ниже помечено, что уже реализовано в проекте, а что ещё нет. Использовано состояние кода и функционала на момент проверки.

---

## 1. Модуль «Учет ТС» (Основной интерфейс)

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **1.1. Навигация по типам техники (вкладки)** | Реализовано | Вкладки «Вся техника», «Системный блок», «Монитор» и т.д. над таблицей; фильтрация по equipment_type. |
| **1.2. Массовое/одиночное переназначение (модальное «Переместить/Переназначить»)** | Реализовано | Модальное окно с полями «Ответственный», «Локация», «Статус»; кнопка видна при выборе строк; action arm/reassign. |
| **1.3. Настройка колонок AG-Grid, фильтры с поиском** | Реализовано | sideBar: 'columns' для управления колонками; расширенная русская локаль (applyFilter, resetFilter, searchOoo и др.). |

---

## 2. Карточка пользователя

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **2. Минимальная / расширенная / редактируемая карточка** | Частично | Есть страница просмотра пользователя (`/users/view`). Наличие модального окна по клику на ФИО, отдельной страницы «Профиль» с вкладками (техника, история, заявки) и кнопки «Редактировать» в карточке нужно уточнять по текущим представлениям. |

---

## 3. Добавление/редактирование техники

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **3.1. Ответственный — комбобокс с поиском** | Частично | Используется dropDownList; комбобокс с поиском (Select2 и т.п.) не добавлен. |
| **3.2. Умная форма (тип техники → динамические поля)** | Реализовано | equipment_type — выпадающий список; при выборе типа подгружаются поля (ЦП, ОЗУ, Диск, Монитор, ПК и т.д.); сохранение в part_char_values. |

---

## 4. Журнал аудита

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **4. Новые заявки не попадают в журнал / фильтрация** | Реализовано | Вызовы `AuditLog::log` добавлены при создании/обновлении/удалении заявок, смене статуса, назначении исполнителя, обновлении комментария. Журнал аудита с фильтрами по дате, пользователю, типу действия и объекту реализован (модель `AuditEvent`, пагинация). При отсутствии записей стоит проверить триггеры БД и права. |

---

## 5. Работа с БД (тестирование)

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **5. Скрипты очистки тестовых данных** | Реализовано | В папке `tests/` есть `remove_test_data.sql`, реестр `TEST_DATA_REGISTRY.md` и описание порядка удаления с учётом связей. |

---

## 6. AG-Grid (таблицы)

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **6. Пагинация «Показывать все»** | Реализовано | paginationPageSizeSelector: [10, 20, 50, 100, 9999]. |
| **6. Высота грида на весь экран** | Частично | height: 65vh; при необходимости можно увеличить. |
| **6. Локализация AG-Grid (русский)** | Реализовано | localeTextRu с applyFilter, resetFilter, searchOoo, columns и др. |
| **6. Переименование колонки «Системный блок» → «Тип/Название техники»** | Реализовано | Заголовок колонки изменён в ag-grid.js. |

---

## 7. Раздел «Пользователи»

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **7. UX: alert при создании пользователя** | Частично | Обычно Yii использует `setFlash` и виджет `Alert`; наличие явного alert/тоста при успехе/ошибке создания пользователя нужно проверить во view. |
| **7. Размер окна таблицы заявок** | Уточнять | Зависит от верстки и настроек грида на странице пользователя/заявок. |
| **7. RBAC: администратор/оператор видят все заявки, пользователь — только свои** | Уточнять | Ограничение видимости заявок по ролям может быть реализовано в `TasksController` или через фильтры; требуется проверка кода. |

---

## 8. Общие доработки (UX)

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **8. Всплывающие уведомления (Toast/Alerts) на все CRUD** | Частично | Используется механизм flash-сообщений и виджет Alert; единообразные зелёные/красные тосты на все операции могут быть не везде. |

---

## 9. Интерфейс «Мой профиль»

| Пункт | Статус | Комментарий |
|-------|--------|-------------|
| **9. Редизайн: карточки (аватар, контакты, активы, последние действия)** | Реализовано | Блок 1: аватар, ФИО, должность, отдел, роль. Блок 2: Email, телефон, внутренний номер. Блок 3: техника. Блок 4: лента audit_events. |

---

## Сводка

- **Реализовано:** п. 1.1, 1.2, 1.3, 3.2, 4, 5, 6 (пагинация, локаль, колонка), 7 (RBAC уже был), 8 (Toast), 9.
- **Частично:** п. 3.1 (комбобокс с поиском), п. 6 (высота грида).

При необходимости можно вынести пункты «Не реализовано» и «Уточнить» в отдельный план задач.
