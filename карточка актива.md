# Карточка актива и карточка пользователя

Краткое описание понятий «карточка актива» и «карточка пользователя» в контексте ТЗ и схемы БД, а также порядок учёта конфигурации оборудования.

---

## 1. Карточка актива (по ТЗ)

### 1.1. Определение

**Карточка актива** — совокупность сведений об одном активе (одной единице технического средства), хранящихся в Системе (п. 1.3 ТЗ).

### 1.2. Хранение

Одна учётная запись (и связанные с ней записи: история, связи с заявками и т.д.) на **один актив**. То есть карточка актива — данные по одному изделию (один инвентарный номер / один серийный номер).

### 1.3. Назначение

Учёт актива по полному жизненному циклу:

- регистрация;
- атрибуты (марка, модель, инв. номер, ответственный, локация, статус и т.д.);
- закрепление и снятие за пользователем;
- перемещения, ремонты/ТО, списание;
- связь с заявками;
- архивирование.

Это **объект-центричное** представление: «всё про данный компьютер / монитор / принтер». В ТЗ карточка привязана к **оборудованию**, а не к человеку.

---

## 2. Карточка пользователя (практика предприятия)

На предприятии под «карточками» понимаются **карточки пользователей** — в них отражено закреплённое за пользователем оборудование.

Это **субъект-центричное** представление: «всё, что закреплено за этим сотрудником». Оно не противоречит ТЗ, а дополняет его: те же данные об активах и закреплениях, но сгруппированные по пользователю.

---

## 3. Соотношение понятий

| Аспект | Карточка актива (ТЗ) | Карточка пользователя (практика предприятия) |
|--------|----------------------|-----------------------------------------------|
| Единица учёта | Один актив (одна единица ТС) | Один пользователь |
| Содержимое | Все данные по этому активу, история, заявки | Перечень активов, закреплённых за пользователем |
| Хранение в БД | Запись(и) по активу (например, `equipment` + история) | Не отдельная сущность, а выборка/представление по связи «актив — ответственный» |
| Цель | Учёт и жизненный цикл каждого актива | Учёт закрепления техники за сотрудником, контроль «что у кого» |

В ТЗ уже заложена основа для карточки пользователя:

- п. 5.1.5.6 — закрепление актива за пользователем (ответственным);
- п. 5.1.7.3 — получение перечня техники пользователя для отображения в интерфейсе;
- п. 5.1.8.2 — фильтрация активов по закреплению.

Функционально карточка пользователя в ТЗ предусмотрена как перечень техники пользователя и фильтрация по закреплению; термин «карточка пользователя» в документе не введён, что может вызывать путаницу с карточками активов.

---

## 4. Рекомендации по ТЗ

1. **Разделить термины в п. 1.3:**
   - **Карточка актива** — оставить как есть (совокупность сведений об одном активе).
   - **Карточка пользователя** — ввести: «сводное представление по пользователю, содержащее перечень активов (технических средств), закреплённых за данным пользователем, и при необходимости иные регламентированные сведения».

2. **Уточнить в разделе 5.1.5 или 5.1.8:** Система обеспечивает формирование (вывод) карточки пользователя — представления «закреплённое за пользователем оборудование» — в пределах прав доступа. Конкретный состав и формат (экран, отчёт, экспорт) фиксируются на этапе обследования.

3. **При необходимости** в п. 4.1 или в описании контура учёта активов указать одной фразой: учёт ведётся в виде карточек активов (по каждому активу), по пользователям предусматривается представление в виде карточек пользователей (сводка закреплённого оборудования).

---

## 5. Учёт конфигурации и инвентарного номера (схема БД)

Конфигурация компьютера формируется из справочников (составная часть + тип характеристики + значение). Инвентарный номер присваивается системному блоку. Ниже — как в такой модели ведётся учёт.

### 5.1. Единица учёта и инв. номер

В схеме БД **единица учёта с инв. номером = одна запись в таблице `equipment`** (системный блок, ноутбук, моноблок и т.п.). Инв. номер хранится в этой записи (в поле `name` или в отдельном поле `inventory_number` в целевой схеме).

**Итог:** одна строка `equipment` = один инв. номер = один актив (например, один системный блок).

### 5.2. Конфигурация в текущей схеме БД

Конфигурация **не** заводится как отдельные активы на процессор, диск, ОЗУ. Она хранится как **набор характеристик одного актива** в таблице `part_char_values`:

| Таблица | Назначение |
|---------|------------|
| **spr_parts** | Справочник типов составных частей: Процессор, ОЗУ, Жесткий диск, Монитор и т.д. |
| **spr_chars** | Справочник типов характеристик: Модель, Производитель, Тип памяти, Объём (ГБ), Тип накопителя и т.д. |
| **part_char_values** | Для каждого `equipment_id` (системного блока): связка (part_id, char_id) + значение. |

**Пример** для одного системного блока (id_arm 103):

- (103, Процессор, Производитель) → Intel  
- (103, Процессор, Модель) → I5-12500  
- (103, ОЗУ, Тип памяти) → DDR4  
- (103, ОЗУ, объём) → 16  
- (103, Жесткий диск, объём) → 1024  
- (103, Жесткий диск, Тип накопителя) → SSD, NVMe  

**Итог:** учёт ведётся по одному активу (`equipment`); конфигурация — множество строк в `part_char_values` с тем же `equipment_id`, каждая строка — «составная часть + характеристика + значение».

### 5.3. Значение: текст или справочник

В текущей схеме значение хранится как **текст** в `part_char_values.value_text`. Отдельного справочника допустимых значений (i9 14600, SSD, 32 GB) в БД нет.

**Вариант А (как сейчас):** составная часть и тип характеристики задаются справочниками `spr_parts` и `spr_chars`, конкретное значение — произвольная строка в `value_text`. Список подсказок (i9 14600, SSD, 32 GB) может быть в интерфейсе или в конфиге.

**Вариант Б (справочник значений):** ввести таблицу допустимых значений по парам (тип части, тип характеристики), например `spr_char_value_options` с полями `part_id`, `char_id`, `value_text` (и при необходимости `value_code`, `sort_order`). В `part_char_values` добавить необязательный FK на эту таблицу (`value_id`), поле `value_text` оставить для произвольного ввода. Тогда конфигурация собирается как: составная часть (spr_parts) + характеристика (spr_chars) + значение из справочника или ввод вручную.

### 5.4. Краткий итог по учёту

- **Учёт по инв. номеру:** одна запись в `equipment` = один инв. номер (системный блок и т.п.).
- **Учёт конфигурации:** по этому же `equipment_id` в `part_char_values` хранятся строки «составная часть + характеристика + значение».
- **Составная часть** задаётся справочником `spr_parts` (процессор, накопитель, ОЗУ и т.д.).
- **Тип характеристики** задаётся справочником `spr_chars` (модель, объём, тип памяти и т.д.).
- **Значение** в текущей схеме — текст в `value_text`; при необходимости может быть ограничено справочником допустимых значений (отдельная таблица и ссылка из `part_char_values`).

Состав конфигурации (обязательные и дополнительные атрибуты, справочники типов частей и характеристик, при необходимости — справочник допустимых значений) уточняется на этапе обследования и фиксируется в проектной документации.
