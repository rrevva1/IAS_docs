### Отчёт: Некорректная работа фильтра дат в AG Grid

**Проблема**

- Фильтр дат (`agDateColumnFilter`) и сортировка по колонкам `Создана` и `Обновлена` работали неверно: значения не фильтровались/сортировались ожидаемо.

**Причина**

- В API (`TasksController::actionGetGridData`) даты отдаются как строки в формате `dd.mm.yyyy HH:MM`.
- AG Grid корректно фильтрует даты, если значение ячейки — это объект `Date` (или строка в ISO-формате, распознаваемом браузером). RU‑формат `dd.mm.yyyy HH:MM` браузером не парсится по умолчанию, поэтому фильтр сравнивал строки, а не даты.

**Решение (Frontend)**

- Добавлен надёжный парсер RU‑дат и подключён к колонкам через `valueGetter`. Для отображения оставлена оригинальная строка через `valueFormatter`.
- Включены `filterParams.inRangeInclusive` для ожидаемого поведения границ диапазона.

Задействованные изменения:

```12:58:web/js/tasks/ag-grid.js
function parseRuDateTime(text) { /* парсинг dd.mm.yyyy HH:MM -> Date */ }

// Колонка "Создана"
columns.push({
  headerName: 'Создана',
  field: 'date',
  valueGetter: (p) => parseRuDateTime(p.data && p.data.date),
  valueFormatter: (p) => p.data && p.data.date ? p.data.date : '',
  filter: 'agDateColumnFilter',
  filterParams: { inRangeInclusive: true },
});

// Колонка "Обновлена"
columns.push({
  headerName: 'Обновлена',
  field: 'last_time_update',
  valueGetter: (p) => parseRuDateTime(p.data && p.data.last_time_update),
  valueFormatter: (p) => p.data && p.data.last_time_update ? p.data.last_time_update : '',
  filter: 'agDateColumnFilter',
  filterParams: { inRangeInclusive: true },
});
```

**Почему это работает**

- `valueGetter` возвращает `Date`, поэтому AG Grid использует нативное сравнение дат при сортировке и в `agDateColumnFilter` (UI календаря/диапазона).
- `valueFormatter` отвечает только за отображение и не влияет на логику фильтрации/сортировки.

**Проверка**

1. Откройте `Заявки (AG Grid)`.
2. В колонке `Создана` включите фильтр по диапазону и задайте: От `01.11.2025`, До `03.11.2025` — должны остаться записи с датами в диапазоне, независимо от времени.
3. Нажмите сортировку по `Создана` и `Обновлена` — порядок должен меняться по дате/времени, а не по строкам.

**Альтернативы/расширение**

- Бэкенд может отдавать дополнительные поля `date_iso`/`last_time_update_iso` в формате ISO (`YYYY-MM-DDTHH:mm:ss`) и использовать их в `valueGetter`.
- Для строгой часовой зоны можно нормализовать время к полуночи при сравнении (если нужно игнорировать время).

**Риски**

- Если в данных попадут нетипичные строки дат, `valueGetter` вернёт `null`. Такие записи будут корректно обрабатываться как «пустые» (не удовлетворяют точному фильтру по дате).

Готово к использованию. Визуальный формат колонок не изменился; логика фильтра и сортировки теперь корректна.


