# Отчет по рефакторингу файла view.php

## Выполненные работы

### 1. Вынос JavaScript кода
**Что сделано:**
- Создан файл `/var/www/ias_uch_vnii/web/js/tasks-view.js`
- Извлечен весь JavaScript код из PHP файла
- Добавлены комментарии и улучшена структура кода

**Содержимое JS файла:**
- Обработчик изменения статуса заявки
- Обработчик назначения исполнителя
- Обработчик модального окна для просмотра изображений
- Использование переменных для URL (передаются из PHP)

### 2. Вынос CSS стилей
**Что сделано:**
- Создан файл `/var/www/ias_uch_vnii/web/css/tasks-view.css`
- Извлечены все встроенные стили из PHP файла
- Добавлены комментарии для лучшей читаемости

**Содержимое CSS файла:**
- Стили для карточек вложений (hover эффекты)
- Стили для изображений в модальном окне
- Стили для кнопок в группах

### 3. Обновление PHP файла
**Что изменено:**
- Удален весь встроенный JavaScript код (строки 177-206)
- Удален встроенный CSS код (строки 256-280)
- Удален встроенный script тег (строки 233-254)
- Добавлено подключение внешних файлов:
  - `$this->registerCssFile('@web/css/tasks-view.css')`
  - `$this->registerJsFile('@web/js/tasks-view.js')`
- Добавлена передача URL для AJAX запросов в JavaScript

### 4. Структура файлов
```
/var/www/ias_uch_vnii/
├── web/
│   ├── css/
│   │   ├── site.css (существующий)
│   │   └── tasks-view.css (новый)
│   └── js/
│       └── tasks-view.js (новый)
└── views/
    └── tasks/
        └── view.php (обновлен)
```

## Преимущества рефакторинга

1. **Разделение ответственности** - PHP отвечает за логику, CSS за стили, JS за интерактивность
2. **Кэширование** - браузер может кэшировать отдельные файлы
3. **Переиспользование** - CSS и JS можно использовать на других страницах
4. **Читаемость** - код стал более структурированным и понятным
5. **Поддержка** - легче вносить изменения в отдельные компоненты

## Технические детали

- JavaScript файл зависит от jQuery (указана зависимость в registerJsFile)
- URL для AJAX запросов передаются через переменные JavaScript
- Все функциональность сохранена без изменений
- Файлы размещены в стандартных директориях Yii2

## Дата выполнения
$(date)
